$.post("back/products.php", {}, )

function getCookie(cname) {
  let name = cname + "=";
  let decodedCookie = decodeURIComponent(document.cookie);
  let ca = decodedCookie.split(';');
  for (let i = 0; i < ca.length; i++) {
    let c = ca[i];
    while (c.charAt(0) == ' ') {
      c = c.substring(1);
    }
    if (c.indexOf(name) == 0) {
      return c.substring(name.length, c.length);
    }
  }
  return "";
}

function setGallery(data) {
  let js = JSON.parse(data);
  let productIMG = `<a href="${js.image}" class="product__big">
  <img src="${js.image}" class="product__big" />
</a>`;
  for (let i = 0;i<3;i++) {
    productIMG += `
        <a href="${js.image}" class="product__small">
                <img src="${js.image}" class="product__small" />
              </a>`;
  }
  document.getElementById('gallery').innerHTML = productIMG;
}

function setProdDescr(data) {
  let js = JSON.parse(data);
  let productNameHTML = '';

  productNameHTML += `<h2 class="product__title">
      ${js.name}
      </h2>`;
  document.getElementById('prod_name').innerHTML = productNameHTML;


  let productAttrHTML = '';
  productAttrHTML += `<tbody>`;
  for (const featureName in js['features']) {
    productAttrHTML += `
          <tr class="product__attr-item">
          <td>${featureName}</td>
          <td>${js['features'][featureName]}</td>
        </tr>`;
  }
  productAttrHTML += `
        </tbody>`;

        
  document.getElementById('prod_attr').innerHTML = productAttrHTML;
}


function setFeatures(data) {
  console.log(data);
  setGallery(data);
  setProdDescr(data);
  prodBuy(data);
  let js = JSON.parse(data);
  let featuresHTML = '';

  featuresHTML += `
      <thead>

      </thead>
      <tbody>`;
  for (const featureName in js['features']) {
    featuresHTML += `
        <tr>
          <td>${featureName}</td>
          <td>${js['features'][featureName]}</td>
        </tr>`
  }
  featuresHTML += `
        </tbody>
        `;
  document.getElementById('features').innerHTML = featuresHTML;
  
}
//тут добавил
function addToCart(id){
  console.log(id);
  $.post("back/addToCart.php",{userId : getCookie('userID'), productId : id});
}
//
function getProd(id) {
  $.post("back/product.php", {
    id: id
  }, setFeatures)
}
//тут добавил
function prodBuy(data){
  let js = JSON.parse(data);
  let prodBuyHTML = '';
  prodBuyHTML += `
  <div class="product__left">
  <ul>
    <li>
      <div class="product__special">
        <span>${js.price} грн</span>
      </div>
    </li>
  </ul>
</div>
<div class="product__right">
  <div class="product__code">
    <span
      >Код товару: <br />
      ${js.id}</span
>
  </div>
</div>
<div class="product__buy-block">
  <div class="product__buttons">
    <button
      type="button"
      id="${js.id}"
      data-loading-text="Завантаження..."
      class="product__card button purchase" 
    >
      Придбати
    </button>
  </div>
  <div class="product__info">
    <p class="product__text">Способи оплати</p>
    <div class="product__icons">
      <svg
        width="54"
        height="30"
        viewBox="0 0 54 21"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <g clip-path="url(#clip0_3106_21252)">
          <path
            d="M25.5401 10.2592V16.415H23.5459V1.21294H28.8348C29.4661 1.20002 30.0938 1.30967 30.6816 1.53555C31.2694 1.76143 31.8057 2.09908 32.2596 2.529C32.718 2.93282 33.0829 3.42806 33.3296 3.98144C33.5764 4.53482 33.6993 5.13351 33.6902 5.73728C33.7033 6.34428 33.5823 6.94689 33.3353 7.50379C33.0884 8.06069 32.7214 8.55873 32.2596 8.96376C31.3347 9.82739 30.1931 10.2588 28.8348 10.258H25.5401V10.2592ZM25.5401 3.08453V8.39124H28.8843C29.251 8.40188 29.6158 8.33747 29.9556 8.20213C30.2953 8.06679 30.6025 7.86349 30.8575 7.60524C31.1111 7.36379 31.3127 7.07498 31.4503 6.75591C31.588 6.43684 31.6589 6.09397 31.6589 5.74759C31.6589 5.40121 31.588 5.05835 31.4503 4.73927C31.3127 4.4202 31.1111 4.1314 30.8575 3.88994C30.6057 3.62625 30.2996 3.41797 29.9594 3.27891C29.6193 3.13985 29.2528 3.07318 28.8843 3.08332H25.5401V3.08453Z"
            fill="#5F6368"
          ></path>
          <path
            d="M38.2857 5.67426C39.7596 5.67426 40.9231 6.05998 41.7761 6.83142C42.6291 7.60286 43.0552 8.66057 43.0543 10.0045V16.415H41.1469V14.9716H41.0602C40.2344 16.1603 39.1362 16.7547 37.7654 16.7547C36.5953 16.7547 35.6164 16.415 34.8287 15.7358C34.4506 15.424 34.1484 15.0336 33.944 14.5929C33.7395 14.1522 33.6381 13.6725 33.647 13.1886C33.647 12.1123 34.0624 11.2563 34.8931 10.6207C35.7238 9.98512 36.8328 9.66652 38.22 9.6649C39.4041 9.6649 40.3793 9.87717 41.1456 10.3017V9.85533C41.1479 9.52543 41.0751 9.19917 40.9327 8.9002C40.7902 8.60124 40.5816 8.33708 40.3219 8.12686C39.7946 7.66094 39.1073 7.40671 38.3971 7.41486C37.2832 7.41486 36.4017 7.87497 35.7527 8.79521L33.9963 7.71203C34.9624 6.35351 36.3922 5.67426 38.2857 5.67426ZM35.7056 13.231C35.7043 13.4795 35.7636 13.7248 35.8787 13.9463C35.9937 14.1679 36.1611 14.3593 36.367 14.5046C36.8081 14.8444 37.3555 15.0243 37.9165 15.0141C38.7581 15.0127 39.5647 14.6847 40.1597 14.1019C40.8203 13.493 41.1506 12.7786 41.1506 11.9586C40.5288 11.4734 39.6618 11.2308 38.5495 11.2308C37.7394 11.2308 37.064 11.4221 36.5231 11.8046C35.9769 12.1927 35.7056 12.6646 35.7056 13.231Z"
            fill="#5F6368"
          ></path>
          <path
            d="M54.0038 6.01385L47.345 21H45.2864L47.7574 15.7564L43.3789 6.01385H45.5465L48.7112 13.4857H48.7545L51.8325 6.01385H54.0038Z"
            fill="#5F6368"
          ></path>
          <path
            d="M17.4818 8.93227C17.4825 8.33713 17.4311 7.74303 17.3282 7.15649H8.91797V10.52H13.735C13.6364 11.0572 13.4278 11.5693 13.1216 12.0255C12.8155 12.4816 12.4183 12.8723 11.9538 13.174V15.3573H14.8287C16.5119 13.8375 17.4818 11.5899 17.4818 8.93227Z"
            fill="#4285F4"
          ></path>
          <path
            d="M8.91822 17.4666C11.3249 17.4666 13.3512 16.6928 14.8289 15.3585L11.9541 13.1752C11.1539 13.7065 10.1234 14.0097 8.91822 14.0097C6.5921 14.0097 4.61774 12.4741 3.91173 10.4048H0.950195V12.6548C1.69246 14.1013 2.83064 15.3172 4.23766 16.1669C5.64469 17.0166 7.26518 17.4666 8.91822 17.4666Z"
            fill="#34A853"
          ></path>
          <path
            d="M3.91115 10.4048C3.5379 9.32046 3.5379 8.14621 3.91115 7.06187V4.81183H0.949613C0.325196 6.02862 0 7.37154 0 8.73333C0 10.0951 0.325196 11.4381 0.949613 12.6548L3.91115 10.4048Z"
            fill="#FBBC04"
          ></path>
          <path
            d="M8.91822 3.45696C10.19 3.43662 11.4189 3.90719 12.3393 4.76696L14.8846 2.27433C13.2706 0.789754 11.1324 -0.0253018 8.91822 2.36712e-05C7.26518 9.74498e-05 5.64468 0.450099 4.23766 1.29979C2.83064 2.14948 1.69246 3.36541 0.950195 4.81184L3.91173 7.06188C4.61774 4.99257 6.5921 3.45696 8.91822 3.45696Z"
            fill="#EA4335"
          ></path>
        </g>
        <defs>
          <clipPath id="clip0_3106_21252">
            <rect width="54" height="21" fill="white"></rect>
          </clipPath>
        </defs>
      </svg>
      <svg
        width="30"
        height="30"
        viewBox="0 0 30 30"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <circle
          cx="15"
          cy="15"
          r="15"
          fill="url(#paint0_linear_3106_21241)"
        ></circle>
        <path
          fill-rule="evenodd"
          clip-rule="evenodd"
          d="M23.1917 16.6143C23.8484 16.6143 24.341 15.9571 24.341 15.3C24.341 14.6429 24.0126 13.9857 23.1917 13.9857C22.3708 13.9857 22.0425 14.6429 22.0425 15.3C22.0425 15.9571 22.3708 16.6143 23.1917 16.6143ZM23.1917 17.6C21.7141 17.6 20.8932 16.6143 20.8932 15.3C20.8932 14.15 21.7141 13 23.1917 13C24.6693 13 25.4902 13.9857 25.4902 15.3C25.3261 16.45 24.5052 17.6 23.1917 17.6ZM20.0723 17.4357V14.4786C20.0723 13.6571 19.5798 13.1643 18.7589 13.1643C18.1022 13.1643 17.6096 13.4929 17.2813 13.8214V13.3286H16.132V17.6H17.2813V14.6429C17.4455 14.3143 17.7738 14.15 18.2664 14.15C18.7589 14.15 19.0872 14.3143 19.0872 14.9714V17.6H20.0723V17.4357ZM13.0126 16.6143C13.6693 16.6143 14.1619 15.9571 14.1619 15.3C14.1619 14.6429 13.8335 13.9857 13.0126 13.9857C12.3559 13.9857 11.8634 14.6429 11.8634 15.3C11.8634 15.9571 12.1917 16.6143 13.0126 16.6143ZM13.0126 17.6C11.535 17.6 10.7141 16.6143 10.7141 15.3C10.7141 14.15 11.535 13 13.0126 13C14.4902 13 15.3111 13.9857 15.3111 15.3C15.147 16.45 14.3261 17.6 13.0126 17.6ZM9.89322 17.4357V14.3143C9.89322 13.4929 9.40068 13 8.57979 13C7.92307 13 7.43053 13.3286 7.10217 13.8214C6.938 13.3286 6.60964 13 5.95292 13C5.2962 13 4.80367 13.3286 4.47531 13.6571V13.1643H3.49023V17.4357H4.63949V14.4786C4.80367 14.3143 5.13203 13.9857 5.46038 13.9857C5.95292 13.9857 6.1171 14.3143 6.1171 14.6429V17.2714H7.26635V14.3143C7.43053 14.15 7.75889 13.8214 8.08725 13.8214C8.57979 13.8214 8.74397 14.15 8.74397 14.4786V17.1071H9.89322V17.4357Z"
          fill="white"
        ></path>
        <defs>
          <linearGradient
            id="paint0_linear_3106_21241"
            x1="15"
            y1="-0.0252778"
            x2="15"
            y2="30.0253"
            gradientUnits="userSpaceOnUse"
          >
            <stop stop-color="#373B45"></stop>
            <stop offset="1" stop-color="#181A1E"></stop>
          </linearGradient>
        </defs>
      </svg>
      <svg
        width="30"
        height="30"
        viewBox="0 0 30 30"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <g clip-path="url(#clip0_3106_21245)">
          <path
            d="M14.9949 0C23.3154 0 30.0001 6.70557 30.0001 15.0314C30.0001 23.3362 23.1273 30.2038 14.6133 29.9948C6.55409 29.7962 -0.0260548 23.169 7.75686e-05 14.9582C0.02621 6.67944 6.71088 0 14.9949 0ZM28.3328 15.0052C28.359 7.69338 22.4165 1.76655 15.1935 1.66202C7.70391 1.55749 1.55234 7.70906 1.6621 15.1986C1.76663 22.4007 7.71959 28.4373 15.2091 28.3328C22.4321 28.2282 28.3537 22.2962 28.3328 15.0052Z"
            fill="#6DC62F"
          ></path>
          <path
            d="M28.333 15.0052C28.3539 22.3014 22.427 28.2282 15.2145 28.3328C7.72495 28.4425 1.77199 22.4059 1.66746 15.1986C1.55771 7.70906 7.70405 1.55749 15.1988 1.66202C22.4166 1.76655 28.3591 7.69338 28.333 15.0052ZM8.60823 19.1289C8.72321 18.7003 8.92705 18.3763 9.19882 18.0836C9.59081 17.6655 10.0716 17.3676 10.5525 17.0749C11.3051 16.6202 12.0734 16.1916 12.7476 15.6272C13.542 14.9634 14.096 14.1585 14.1901 13.0923C14.3103 11.7334 13.7772 10.4111 12.3504 9.85191C11.4462 9.49651 10.5159 9.45993 9.57513 9.75261C8.88001 9.97212 8.32077 10.3798 7.90788 10.9808C7.46363 11.6289 7.30684 12.3659 7.26502 13.1289C7.24412 13.4739 7.2807 13.4791 7.62565 13.4791C7.86084 13.4791 8.09603 13.4686 8.33123 13.4843C8.51415 13.4948 8.603 13.4634 8.60823 13.2439C8.61868 12.7108 8.73889 12.1934 9.02112 11.7282C9.42879 11.0436 10.056 10.7456 10.819 10.7875C11.6082 10.8345 12.272 11.169 12.6117 11.9321C12.9044 12.601 12.8365 13.2753 12.4811 13.9129C12.157 14.4878 11.65 14.8902 11.1169 15.2509C10.448 15.7056 9.74238 16.1028 9.08907 16.5784C8.28419 17.1638 7.63088 17.8589 7.29638 18.8258C7.16049 19.223 7.10823 19.6359 7.02461 20.0383C7.0037 20.122 6.85736 20.4303 7.20231 20.4251C9.44969 20.4199 11.6919 20.4199 13.9392 20.4251C14.0804 20.4251 14.1169 20.378 14.1117 20.2474C14.1013 19.9495 14.096 19.6568 14.1117 19.3589C14.1222 19.176 14.0647 19.1289 13.8818 19.1289C12.2302 19.1341 10.5734 19.1341 8.92182 19.1341C8.82774 19.1289 8.73367 19.1289 8.60823 19.1289ZM21.5072 13.0662C21.5072 11.9948 21.502 10.9233 21.5176 9.85714C21.5229 9.60627 21.4392 9.54878 21.2145 9.56446C20.9741 9.58536 20.7284 9.57491 20.4828 9.56446C20.3365 9.55923 20.2476 9.60104 20.164 9.72648C19.6257 10.5105 19.0716 11.2892 18.5281 12.0732C17.7389 13.2178 16.9863 14.3937 16.15 15.4965C15.664 16.1394 15.4288 16.7875 15.5176 17.5819C15.5385 17.7805 15.5804 17.8171 15.7685 17.8171C17.1692 17.8066 18.5699 17.8223 19.9706 17.8066C20.2162 17.8066 20.2476 17.8798 20.2424 18.0941C20.2267 18.7892 20.2476 19.4843 20.2319 20.1847C20.2267 20.3885 20.2894 20.4355 20.4776 20.4251C20.7441 20.4094 21.0159 20.4094 21.2877 20.4251C21.4706 20.4355 21.5229 20.378 21.5176 20.1951C21.5072 19.4634 21.5176 18.7317 21.5124 18C21.5124 17.8484 21.5542 17.8066 21.7006 17.8118C22.0769 17.8223 22.448 17.8118 22.8243 17.8171C22.9601 17.8223 23.0072 17.7805 23.002 17.6394C22.9915 17.3415 22.9915 17.0488 23.002 16.7509C23.0072 16.5836 22.9654 16.5209 22.7877 16.5261C22.4375 16.5366 22.0926 16.5209 21.7424 16.5314C21.5542 16.5418 21.5124 16.4739 21.5124 16.2962C21.5124 15.2247 21.5072 14.1481 21.5072 13.0662Z"
            fill="#101010"
          ></path>
          <path
            d="M8.60774 19.1289C8.73317 19.1289 8.82725 19.1289 8.92133 19.1289C10.5729 19.1289 12.2297 19.1341 13.8813 19.1237C14.0642 19.1237 14.1217 19.1655 14.1112 19.3537C14.0955 19.6463 14.1008 19.9442 14.1112 20.2422C14.1164 20.3728 14.0799 20.4199 13.9387 20.4199C11.6914 20.4146 9.4492 20.4146 7.20181 20.4199C6.85164 20.4199 7.00321 20.1167 7.02411 20.0331C7.11296 19.6307 7.16 19.2178 7.29589 18.8206C7.63039 17.8589 8.2837 17.1585 9.08857 16.5732C9.74188 16.0976 10.4475 15.7003 11.1164 15.2456C11.6548 14.885 12.1565 14.4826 12.4806 13.9077C12.836 13.27 12.9039 12.5958 12.6112 11.9268C12.2767 11.1638 11.6077 10.824 10.8185 10.7822C10.0555 10.7404 9.4283 11.0383 9.02063 11.723C8.74363 12.1881 8.62342 12.7056 8.60774 13.2387C8.60251 13.4634 8.51889 13.4895 8.33073 13.4791C8.09554 13.4686 7.86035 13.4739 7.62516 13.4739C7.28021 13.4739 7.24363 13.4686 7.26453 13.1237C7.30634 12.3606 7.46314 11.6237 7.90739 10.9756C8.32028 10.3746 8.87951 9.96689 9.57464 9.74738C10.5102 9.4547 11.4457 9.49128 12.3499 9.84668C13.7767 10.4059 14.3098 11.723 14.1896 13.0871C14.0955 14.1533 13.5415 14.9582 12.7471 15.6219C12.0729 16.1864 11.3046 16.6202 10.552 17.0697C10.0659 17.3624 9.59032 17.6603 9.19833 18.0784C8.92655 18.3763 8.72272 18.7003 8.60774 19.1289Z"
            fill="#FEFEFE"
          ></path>
          <path
            d="M21.5071 13.0662C21.5071 14.1429 21.5123 15.2248 21.5019 16.3014C21.5019 16.4791 21.5437 16.5471 21.7318 16.5366C22.0768 16.5209 22.427 16.5418 22.7771 16.5314C22.9548 16.5262 22.9966 16.5889 22.9914 16.7561C22.9757 17.0488 22.981 17.3467 22.9914 17.6446C22.9966 17.7857 22.9496 17.8223 22.8137 17.8223C22.4374 17.8119 22.0663 17.8275 21.69 17.8171C21.5437 17.8119 21.5019 17.8537 21.5019 18.0052C21.5071 18.737 21.4966 19.4687 21.5071 20.2004C21.5071 20.3833 21.4601 20.4408 21.2771 20.4303C21.0106 20.4147 20.7388 20.4147 20.467 20.4303C20.2736 20.4408 20.2162 20.3938 20.2214 20.1899C20.2371 19.4948 20.2162 18.7997 20.2318 18.0993C20.2371 17.885 20.2005 17.8066 19.9601 17.8119C18.5594 17.8275 17.1587 17.8171 15.758 17.8223C15.5698 17.8223 15.528 17.7857 15.5071 17.5871C15.4235 16.7927 15.6534 16.1446 16.1395 15.5018C16.981 14.3938 17.7284 13.2178 18.5175 12.0784C19.0611 11.2944 19.6151 10.5157 20.1534 9.73173C20.2371 9.6063 20.3311 9.56448 20.4723 9.56971C20.7179 9.58016 20.9583 9.58539 21.204 9.56971C21.4339 9.55403 21.5123 9.61152 21.5071 9.86239C21.4966 10.9286 21.5071 12 21.5071 13.0662ZM20.2266 11.6185C19.1029 13.2857 18.021 14.8903 16.913 16.5366C17.9897 16.5366 18.9984 16.5314 20.0123 16.5418C20.2057 16.5418 20.2371 16.4791 20.2318 16.3066C20.2266 14.8275 20.2266 13.3485 20.2266 11.8641C20.2266 11.8119 20.2266 11.7544 20.2266 11.6185Z"
            fill="#FEFEFE"
          ></path>
          <path
            d="M20.2267 11.6185C20.2267 11.7544 20.2267 11.8066 20.2267 11.8641C20.2267 13.3432 20.2267 14.8223 20.2319 16.3066C20.2319 16.4791 20.2005 16.5418 20.0124 16.5418C19.0037 16.5314 17.995 16.5366 16.9131 16.5366C18.0211 14.8902 19.103 13.2857 20.2267 11.6185Z"
            fill="#101010"
          ></path>
        </g>
        <defs>
          <clipPath id="clip0_3106_21245">
            <rect width="30" height="30" fill="white"></rect>
          </clipPath>
        </defs>
      </svg>
    </div>
  </div>
</div>
</div>`;
document.getElementById('product__buy').innerHTML = prodBuyHTML;
console.log(js.id);
document.getElementById(js.id).addEventListener("click", function(event){
  console.log(event.target.id);
$.post("back/addToCart.php",{userId : getCookie('userID'), productId : event.target.id},function(data){console.log(data);})
})}
